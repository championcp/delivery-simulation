# 信息科技小课堂快递柜体验系统 V1.0

面向小学生的快递柜操作模拟程序，采用 Next.js + Tailwind CSS 构建。系统忠实还原“信息科技小课堂快递柜”的投件、取件流程，支持动画演示、提示音反馈，以及 SQLite 数据存储，方便在课堂或体验活动中使用。

## 功能亮点

- **直观界面**：快递柜平面图、电子屏幕操作区均为中文提示，按钮和输入框尺寸适合学生鼠标操作。
- **双流程体验**：覆盖“快递员投件”和“用户取件”两套核心操作，生成/验证 6 位取件码，贴近真实体验。
- **动态反馈**：柜门开启/关闭动画与提示音同步，让学生感受到真实柜体的动作。
- **数据持久化**：使用 `data/locker.db`（SQLite）持久保存柜格占用和包裹信息，刷新页面不会丢失状态。
- **易于扩展**：后端服务抽象为 API，可在后续 Sprint 中继续扩展寄件、异常处理、账户体系等功能。

## 技术栈

- [Next.js 15 App Router](https://nextjs.org/)（TypeScript）
- [Tailwind CSS](https://tailwindcss.com/) + 自定义动画
- [better-sqlite3](https://github.com/WiseLibs/better-sqlite3) 用于 SQLite 数据库访问
- Web Audio API 播放提示音

## 目录结构

```
web/
├─ src/
│  ├─ app/              # App Router 页面与 API 路由
│  ├─ components/       # 前端组件（LockerSimulation 等）
│  └─ lib/              # 数据库与业务逻辑
├─ data/
│  └─ locker.db         # 运行时生成的 SQLite 数据库（首次启动自动创建）
├─ public/              # 静态资源
└─ package.json
```

## 本地运行

1. 进入项目目录并安装依赖：
   ```bash
   cd web
   npm install
   ```
2. 启动开发服务器：
   ```bash
   npm run dev
   ```
3. 打开浏览器访问 [http://localhost:3000](http://localhost:3000)。

初次访问时会自动在 `data/locker.db` 创建数据库并写入 24 个默认柜格。若需重置，可删除该文件后重新启动。

## 安装与部署

### 生产构建

```bash
cd web
npm install
npm run build
```

构建完成后，Next.js 会生成可供生产运行的 `.next` 文件夹，以及使用 SQLite 的运行时依赖（`data/locker.db` 在首次运行时才会自动创建）。

### 启动生产服务

```bash
npm run start
```

默认监听 `http://localhost:3000`。部署到服务器时，可使用常见的进程管理工具（如 PM2、systemd）守护 `npm run start`。

### 注意事项

- 生产环境同样需要持久化 `data` 目录，以保留柜格状态与包裹数据。
- 如果部署在多实例场景，请为 SQLite 提供共享存储或改为集中式数据库（后续迭代可替换）。
- 如果需要在不同端口或域名运行，可通过设置环境变量 `PORT`、`HOSTNAME` 来覆盖默认配置。

## 操作指南

### 快递员投件流程

1. 点击屏幕上的「快递员投件」。
2. 输入收件人手机号码（11 位），可选填写姓名。
3. 选择包裹适合的柜格大小（小/中/大）。
4. 点击「打开柜门」后，系统会自动分配可用柜格并生成 6 位取件码：
   - 屏幕显示柜格编号和取件码；
   - 柜门动画打开，同时播放提示音。
5. 放入包裹，点击「已放入包裹，关闭柜门」模拟关门，系统回到首页。

### 用户取件流程

1. 点击「用户取件」。
2. 使用屏幕上的数字键盘输入 6 位取件码。
3. 点击「打开柜门」：
   - 若取件码正确，屏幕显示柜格编号和取件提示；
   - 柜门动画打开，并播放提示音。
4. 取出包裹后点击「已取出包裹，关闭柜门」，系统回到首页。

输入错误时屏幕会给出中文提示，可重新尝试或返回首页。

## 数据说明

| 表名       | 说明                     |
| ---------- | ------------------------ |
| `lockers`  | 24 个柜格基础信息、尺寸 |
| `packages` | 投件记录、取件码及状态  |

- 柜格状态通过 `packages` 表中的 `status` 自动计算，无需手动维护。
- 取件成功后状态更新为 `picked`，占用自动释放。

## 下一步迭代建议

1. 扩展寄件、退件、异常求助等模块。
2. 引入教师端仪表板，支持批量生成体验数据。
3. 增加语音提示、字号调节等无障碍能力，适配低年级学生。

欢迎在新的 Sprint 中继续迭代，保持 GitHub Flow 工作流：为每个需求创建独立分支，开发完成后通过 Pull Request 合并。
